---
title: 文字编辑
permalink: .html
theme: jekyll-theme-cayman
---

- 编写或修改文字
- 编写或修改代码
- 用户可扩展的编辑器 emacs

# emacs

## 在ubuntu 中使用emacs
2022年了搜了一堆网站，最终发现解决这个问题有好几个细节很多热门的答案都没有讲清楚，我的系统是Debian, 首先你要确定你有zh_CN.utf8这个locale,那些答案的设定才有意义

locale -a | grep -i zh_CN
如果没有，下面的命令安装

sudo apt install -y locales
dpkg-reconfigure locales 
弹出的图形界面直接选 all, 装完之后用之前的命令验证一下能找到 zh_CN.utf8 了 下面的命令行启动支持中文

LC_CTYPE="zh_CN.utf8" emacs
为了避免麻烦，每次都要写这堆前缀，可以改 ~/.bashrc 最后面加上

export LC_CTYPE="zh_CN.utf8"
改完重新加载一次生效

source ~/.bashrc
这个时候验证一下直接输入 emacs 命令启动，也能输入中文了

对于桌面图标，需要改一下 /usr/share/applications/emacs.desktop 文件

本来呢，直接把其中的 TryExec 和 Exec 前面都加上上面的那段 LC_CTYPE="zh_CN.utf8" 代码前缀就行了,但是因为 desktop 文件本身会识别等号，所以这段代码含等号就不能这样加了，先在/usr/bin 创建个新的命令

sudo touch /usr/bin/my_emacs
sudo chmod +rwx my_emacs
内部内容如下

#!/bin/bash
LC_CTYPE="zh_CN.utf8" emacs
然后修改 /usr/share/applications/emacs.desktop 中的 TryExec 和 Exec 为

TryExec=/usr/bin/my_emacs
Exec=/usr/bin/my_emacs
这样点击图标启动就也能支持中文了。 更多 .desktop 文件的细节，google linux freedesktop desktop file entry key

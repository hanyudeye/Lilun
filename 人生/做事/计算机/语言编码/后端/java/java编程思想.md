---
title: java 编程思想
permalink: thinkinjava
theme: jekyll-theme-cayman
---

## 称赞

1. 例子清楚，细节清晰，容易理解
2. 这是一本可读性强、极富深度的Java书籍 
3. 这些书使得我的女朋友成我为“呆子”。书中充满两睿智的见解
4. 此书，撼动了整个自由世界。

## 前言

程序设计其实是对复杂性的管理： 待解决问题的复杂性，以及用来解决该问题的工具的复杂性。

我认为，通讯变革的成果并不见得就是传输巨量的比特。真正变革是人与人之间的通讯变得更容易。

## 绪论

上帝赋予人类说话的能力，而语言又创造了思想，思想是人类对宇宙的亮度。

这本书讨论的是编程问题，他们为什么成为问题，以及 Java 已经采取什么样的方案来解决他们。

我发现在一周的时间内填鸭式的教授所有的内容，对于我和参加研讨的人来说，都是一种痛苦。Java已经不是一种可以在一周内教授的“简单”的语言了。


## 对像导论

> 我们之所以将自然界分解，组织成各种概念，并按其含义分类，主要是因为我们是整个口语交流社会共同遵守的协定的参与者，这个协定以语言的形式固定下来... 除非赞成这个协定中规定的有关语言信息的组织和分类，否则我们根本无法交谈

许多人在没有了解面向对象程序设计的全貌之前，感觉无法轻松自在地从事此类编程。此处引入一些OOP的基本概念。

1.1 抽象过程
人们所能够解决的问题的复杂性直接取决于抽象的类型和质量。

面向对象的实质是：程序可以通过添加新类型的对象使自身适用于某个特定问题。
因此，当你在阅读描述解决方案的代码的同时，也是在阅读问题的表述。所以，OOP允许根据问题来描述问题，而不是根据运行解决方案的计算机来描述问题。

面向对象语言的五个基本特征：
1. 万物皆为对象 
2. 程序是对象的结合
3. 每个对象都有自己的由其它对象所构成的存储
4. 每个对象都拥有其类型
5. 某一特定类型的所有对象都可以接收同样的消息

1.2 每个对象都有一个接口

尽管我们在面向对象程序设计中，进行的是创建新的数据类型，但所有面向对象的程序设计语言都使用 class 这个关键词来表示数据类型。当看到类型一词时，可将其作为类来考虑。类型=类=class

面向对象方法并不是仅限构建仿真程序，面向对象技术的应用确实可以将大量的问题很容易降解为一个简单的解决方案。

创建新对象的方法是用关键词 new， 也就是类的实例。为了向对象发送消息，需要声明对象的名称，以圆点符号连接一个消息请求。

1.3 每个对象都提供服务

当正在试图开发或理解一个程序设计时，最好的方法之一就是将对象想象为“服务提供者”。
程序本身将向用户提供服务，它将通过调用其它对象提供的服务来实现这一目的。你的目的就是去创建（或者最好是在现有代码库中寻找）能够提供理想的服务来解决问题的一系列对象。

着手从事这件事的一种方式就是问自己：“如果我们可以将问题从表象中抽取出来，那么什么样的对象可以马上解决我的问题呢？” 如果持续这么做，那么最终你会说：“那个对象看起来很简单，可以坐下来写代码了”，或者是“我肯定这个对象已经存在来”。这是将问题分解为对象集合的一种合理方式。

将对象看作是服务提供者还有一个附带的好处： 有助于提高对象的内聚性。
在一个良好的面向对象的设计中，每个对象都可以很好地完成一项任务，但是它并不试图做更多的事。

将对象作为服务提供者看待是一件伟大的简化工具，这不仅在设计过程中很有用，而且当其它人试图理解你的代码或重用某个对象时，如果他们看出了这个对象所能提供的服务的价值，它会使调整对象以适应其设计的过程变得简单得多。

1.4 被隐藏的具体实现
将程序开发人员按照角色分为 **类创建者** （创建新数据类型的程序员）和 **客户端程序员** （在其应用中使用数据类型的类消费者）是大有裨益的。

Java用三个关键字在类的内部设定边界： public 、private、protected。
public 表示其元素任何人都可以访问
private 表示除类型创建者或类型的内部方法外都不能访问其元素
protected 与 private 相当，差别在于继承的类可以访问 protected 成员，但不能访问 private 成员

1.6 继承

继承用来复制相似的基类，但是基类变化会对继承类有影响

有两种方法可以使基类与导出类产生差异。
1. 直接在导出类添加 **新方法**
2. 覆盖(overriding) 基类的方法

"是一个” 与“像是一个”关系 就是 完全继承与继承并添加的关系

1.7 伴随多态的可互换对象

在处理类型的层次结构时，经常想把一个对象不当作它所属的特定类型来对待，而是将其当作其基类的对象来对待。这使得人们可以编写出不依赖于特定类型的代码。在“几何型”的例子当中，方法操作的都是泛化(generic)的形状，而不关心他们是圆形、正方形、三角形还是其它尚未定义的形状。所以，这些方法都是直接对一个几何型对象发送消息；他们不用担心对象将如何处理消息。

这样的代码是不会受添加新类型影响的，而且添加新类型是扩展一个面向对象程序以便处理新情况的常用方式。为了使用这种方法（后期绑定)，Java 使用一段特殊的代码来代替绝对地址。这段代码使用在对象中存储的信息来计算方法体的地址。

在某些语言中，必须明确地声明希望某个方法具备后期绑定属性所带来的灵活性（C++ 是使用virtual 关键字）。在 Java中，动态绑定是默认行为，不需要添加额外的关键字来实习多态。

多态例子
``` java
void doSomething(Shape shape){
    shape.erase();
    //...
    shape.draw();
}

``` 

1.8 单根继承结构

单根继承结构保证所有对象都具备某些功能。
单根继承结构使垃圾回收器的实现变得容易得多。

1.9 容器 (数组)

对于在解决某个问题时，不知道需要多少个对象，这是可以用容器(数组)解决。(使用遍历容器的方法一个个解决)

容器类型:
1. List (存储序列)
2. Map (地图，存储关联数组)
3. Set (每种对象类型只有一个)
4. 队列，树，堆栈

多种容器的原因:
1) 不同容器提供不同类型的接口和外部行为。堆栈相比于队列就具备不同的接口和行为，也不同于集合和列表的接口和行为。
2) 不同的容器对于某些操作具有不同的效率。如 ArrayList (数组) 和 LinkedList (节点)

参数化类型(泛型)：
参数化类型就是一个编译器可以自动定制作用于特定类型上的类。可以使用下面的方法创建一个存储Shape的ArrayList：

``` java
ArrayList<Shape> shapes = new ArrayList<Shape>();
```
为了利用泛型的优点，很多标准类库构件都已经进行了修改。泛型对本书中的许多代码都产生了重要的影响。

1.10 对象的创建和生命期

在使用对象时，最关键的问题之一便是他们的生成和销毁方式。每个对象为了生存都需要资源，尤其是内存。当我们不再需要一个对象时，它必须被清理掉，使其占有的资源可以被释放和重用。

Java 使用 在被成为堆（heap）的内存池中动态地创建对象。在这种方式中，直到运行时才知道需要多少对象，它们的生命周期如何，以及它们的具体类型是什么。创建动态内存使用 new 关键字来构件对象的动态实例。

动态方式有这样一个一般性的逻辑假设：对象趋向于变得复杂，所以查找和释放存储空间的开销不会对对象的创建造成重大冲击。

对于对象的回收，Java使用 **垃圾回收器**，减少了所必须考虑的议题和必须编写的代码。

1.11 异常处理：处理错误

异常处理将错误处理直接置于编程语言中，甚至操作系统中。异常是一种对象，它从出错地点被“抛出”，并被专门设计用来处理特定类型错误的相应的异常处理器“捕获”。异常处理就像是与程序正常执行路径并行的、在错误发生时执行的另一条路径。

Java 一开是就内置来异常处理，并要求你必须使用它。

1.12 并发编程

实现并发的方式

1) 最开始是编写中断服务程序，主进程的挂起是通过硬件中断来触发的。(难度大，面向机器)
2) 线程：彼此独立运行的部分，也称“并发”。(如用户界面，当用户按下按钮后，可快速得到一个响应，而不用等待当前的任务完成)

在语言级别上，多线程的便利是不用操心机器上是否有多个处理器。
多线程的隐患是：共享资源，这时需要对资源上锁。

1.13 Java与Internet

1.13.1 Web是什么

客户/服务器计算技术: 系统具有一个中央信息存储池，用来存储某种数据，它通常存在于数据库中，你可以根据需要将它分发给某些人员或机器集群。客户/服务器的概念的关键是信息池存储集中于中央。

客户/服务器的问题是：你只有单一的服务器，却要同时为多个客户服务。会涉及数据库管理系统，如果允许客户在服务器中插入新的信息，要保证数据在添加的过程中不会丢失（事物处理）

如果客户端软件发生改变，那么它必须被重新编译、调试、安装。如果象支持更多类型机器和操作系统，问题更麻烦。还有网络延迟问题，为了将延迟最小化，程序员努力减轻处理任务的负载，通常是分散给客户端机器处理，但有时也会使用所谓的中间件将负载分散给在服务器端的其它机器。


## 一切都是对象

"如果我们说另一种不同的语言，那么我们就会发觉一个有些不同的世界" Luduing Wittgerstein

### 2.1 用引用操作对象

在Java中，操作对象时，其实操作的是对象的一个引用（对象名[变量名]）。

### 2.2 必须由你创建所有对象

存储地
   1) 寄存器
   2) 堆栈
   3) 堆 ，用于存放所有Java对象
   4) 常量存储  直接存放在程序代码内部
   5) 非RAM存储 JDBC和 Hibernate 、CD、磁盘

基本类型

| 基本类型 | 包装器类型 |
| -------- | ---------- |
| char     | Character  |
| byte     | Byte       |
| short    | Short      |
| int      | Integer    |
| long     | Long       |
| float    | Float      |
| double   | Double     |
| void     | Void       |

char C ='X';
Character Ch = new Character(C);

高精度数字
Java 提供了两个用于高精度计算的类： BigInteger 和 BigDecimal，因为精度高，所以计算速度慢。BigInteger 支持任意精度的整数，BigDecimal 支持任意精度的定点数。

### Java 中的数组

在C和C++中使用数组是很危险的，因为在其中，数组就是内存块，任何访问其内存块之外的数组，或是在数组初始化前使用，都会产生难以预料的后果。

Java是数组安全的，在于运行时的下标检查，会牺牲性能。

### 创建新的数据类型:类

如果一切都是对象,那么是什么决定了某一类对象的外观与行为呢?大多数面向对象的程序语言都习惯用 关键字 class来表示 "我准备告诉你一种新类型的对象看起来像什么样子".如:
```java
class ATypeName {}
```
这就引入了一个新的类型.然后可以使用 new 创建这种类型的对象.

```java
ATypeName a = new ATypeName();
```

#### 字段和方法
一旦定义了一个类,就可以在类中设置两种类型的元素:字段(也称数据成员)和方法(也称成员函数).字段可以是任意类型的对象.如果字段是对某个对象的引用,那么必须初始化该引用,以便使其与一个实际对象相关联.

每个对象都有用来存储其字段的空间,普通字段不能在对象间共享.下面是一个具有某些字段的类:

``` java
class DataOnly{
    int i;
    double d;
    boolean b;
}
```

可以给字段赋值,但首先必须知道如何引用一个对象的成员,方法是:在对象引用的名称后紧接着一个句点,然后再接着是对象内部的成员名称.  如

```java
data.i=47;
data.d=1.1;
```
### 方法,参数和返回值

方法决定了一个对象能够接收什么样的消息.方法的基本组成包括:名称,参数,返回值和方法体.

```java
ReturnType methodName ( /*Argument list */){
    /* method body */
}
```


## 操作符


## 控制执行流程

## 初始化和清理

### 用构造器确保初始化
可以假想为编写的每个类都定义一个 initialize()方法.该方法名提醒你在使用对象前,应首先调用 initialize().然而,这意味着用户必须记得自己去调用这方法.java 中有一个自动化的构造函数,可以在 new 出对象时,顺便初始化对象的数据字段.如下

``` java
Class Rock{
    Rock(){ //构造器
        initialize....
    }
}
```

构造器的名称要与类名完全相同.

### 方法重载 (重用方法名)
### this关键字 (代表自己)
this关键字只能在方法内部使用,表示对"调用方法的那个对象"的引用.如果在方法内部调用同一个类的另一个方法,就不必使用this,直接调用即可.

### 可变参数
``` java
public class NewVarArgs{
    static void printArray(Ojbect... args){
        for(Object obj: args)
            System.out.print(obj+" ");
        System.out.println();
    }

    public static void main(){
        //使用不同参数
        printArray(new Integer(47), new Float(3.14));
        printArray(1,3.14F, 11.2,341);
    }
}
```

### 枚举类型
定义枚举:
```java
public enum Spiciness{
    NOT, MILD,MEDIUM,HOT,FLAMING
}
```

使用:

```java
Spiciness howHot = Spiciness.MEDIUM;
System.out.println(howHot);
```
输出: MEDIUM

## 访问权限控制
访问控制(或隐藏具体实现) 与 "最初的实现并不恰当"有关.

### 包:库单元
包内包含有一组类,他们在单一的名字空间之下被组织在一起.
例如,在java的标准发布中有一个工具库,它被组织在 java.util名字空间之下.java.util 中有一个叫做 ArrayList的类,使用 ArrayList的一种方式是用其全名 java.util.ArrayList来指定.

如果你想名字不要写那么长,可以使用 import java.util.*; 这种方式

#### 代码组织
当编译一个 .java文件时,在 .java文件中的每个类都有一个输出文件,形式为 类名+.class . 可以通过 java 打包并压缩为jar 文档文件,java 解释器负责查找,装载和解释.

声明所属的包 : (必须写在文件开头,除注释)
```java
//: access/mypackage/MyClass.java
package access.mypackage;

public class MyClass{

}
....
//: access/ImportedMyClass.java
import access.mypackage.*;

public class ImportMyClass{

}
```

### 接口访问权限

public: 自己对每个人都可用.



## 复用类

## 多态

## 接口
## 内部类

## 持有对象

## 通过异常处理错误

## 字符串

## 类型信息

## 泛型

## 数组

## 容器深入研究

## I/O 系统

## 枚举类型

## 注解

## 并发

## 图形化用户界面



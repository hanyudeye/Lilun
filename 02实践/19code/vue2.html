<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue2使用</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.13/vue.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/1.3.2/axios.min.js"></script>
</head>

<body>


    <div class="app">
        <div>
            <h3>判断</h3>
            <p v-if="display">hello</p>
            <p v-else>world</p>
        </div>
        <div>
            <h3>elif 连续判断</h3>
            <p v-if="type ==='A' ">A</p>
            <p v-else-if="type==='B'">B</p>
            <p v-else-if="type==='C'">C</p>
            <p v-else>ELSE</p>
        </div>

        <div>
            <h3>列表渲染</h3>
            <ul>
                <li v-for="item in list">{{item}}</li>
            </ul>
        </div>

        <div>
            <h3>方法</h3>
            <button v-on:click="greet">欢迎</button>
        </div>

        <div>
            <h3>异步通讯 axios 框架</h3>
            <div>名称:{{axiosinfo.name}}</div>
            <div>URL: <a v-bind:href="axiosinfo.url">{{axiosinfo.url}}</a></div>
        </div>

        <div>
            <h3>表单输入绑定(双向绑定v-model)</h3>
            <label for="">输入名字:</label>
            <input type="text" v-model="name" value="hello">
            <p>输入的名字是：{{name}}</p>

            <label>请选择家庭成员数</label>
            <select v-model="selected">
                <option value="" disabled="disabled">请选择</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
            </select>
            成员数是：{{selected}}
        </div>

        <div>
            <h3>组件</h3>
            <my-component-li v-for="item in list" v-bind:item="item"></my-component-li>

            <h3>计算属性(缓存结果)</h3>
            <p>当前时间(属性):{{getCurrentTime}}</p>
        </div>

        <div>
            <h3>插槽 slot (确定组件位置)</h3>

            <todo>
                <todo-title slot="todo-title" v-bind:title="title"></todo-title>
                <todo-items slot="todo-items" v-for="(item,index) in contents" v-bind:item="item" v-bind:index="index"
                    v-on:remove="removeItem(index)"></todo-items>
            </todo>
        </div>
    </div>
    <script>

        Vue.component("my-component-li", {
            props: ['item'],
            template: "<li>{{item}}</li>"
        })


        //组件
        Vue.component("todo", {
            template: '<div><slot name="todo-title"></slot> <ul> <slot name="todo-items"></slot> </ul></div>'
        })


        Vue.component("todo-title", {
            props: ["title"],
            template: "<h4>{{title}}</h4>"
        })

        Vue.component("todo-items", {
            props: ["item", "index"],
            template: "<li>{{index}}--{{item}}<button @click='remove'>删除</button></li>",
            //组件事件，组件里的事件默认无法调用外面的事件
            methods: {
                remove: function () {
                    //这语法可以导出到外面的事件
                    this.$emit("remove")
                }
            }
        })


        new Vue({
            el: ".app",
            data: {
                display: true,
                type: 'B',
                list: ['赵', "钱", "孙", "李"],
                msg: "hello",
                name: "",
                //家庭成员数
                selected: '',
                axiosinfo: {
                    name: '',
                    url: ""
                },
                //插槽
                title: "今日待办",
                contents: ["8:00 看书", "9:00 洗衣服"]
            }, methods: {
                greet: function () {
                    alert("欢迎朋友!")
                },
                //外面的事件
                removeItem: function (index) {
                    //删除某一项
                    this.contents.splice(index, 1)
                }
                //mounted钩子函数相当于 jQuery 中的 ready 函数，页面加载好后调用执行
                //通常作为 异步请求使用
            }, mounted: function () {
                axios.get('data.json')
                    .then(response => this.axiosinfo = response.data)
            },
            //计算属性
            computed: {
                getCurrentTime: function () {
                    return Date.now();
                }
            }

        })
    </script>
</body>

</html>